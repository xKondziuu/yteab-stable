(()=>{"use strict";var e=[function(e,t,i){var a=this&&this.__createBinding||(Object.create?function(e,t,i,a){void 0===a&&(a=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,a,o)}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&a(t,e,i);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const l=r(i(1)),n=i(2),s=i(4),d=i(12),c=i(13),u=i(2),y=i(7),p=i(9),m=i(11),g=i(8),v=i(10),b=i(6),f={_v:l.version,watch:{embed:s.embed,init:c.init,modify:y.modify,mute:p.mute,quality:m.quality,ratiofix:g.ratiofix,sync:v.sync},events:d.events,urlparams:b.urlparams,logger:u.logger};!function(){if(window.yteab=f,window.yteab==f){n.logger.debug.loaded("inject/index.ts"),n.logger.log("Extension loaded successfully!"),f.events.listen("yt-navigate-finish"),f.events.listen("yt-navigate-start");try{f.watch.init()}catch(e){console.error(e)}}}(),t.default=f},e=>{e.exports=JSON.parse('{"name":"yteab-stable","version":"1.0.0","description":"YouTube Ethical AdBlocker","license":"UNLICENSED","homepage":"https://github.com/xKondziuu/yteab-stable","private":false,"repository":{"type":"git","url":"https://github.com/xKondziuu/yteab-stable.git"},"author":{"name":"xKondziuu","email":"xkondziuu4@gmail.com","url":"https://github.com/xKondziuu"},"contributors":[{"name":"MrFajFel","email":"filipgamer1234567@gmail.com","url":"https://github.com/MrFajFel"}],"scripts":{"build":"webpack build --mode none --config ./webpack.config.js && (sh build-linux.sh || call build-win.cmd)"},"devDependencies":{"@types/firefox":"^0.0.33","@types/node":"^20.8.9","css-loader":"^6.8.1","postcss-import":"^15.1.0","postcss-loader":"^7.3.3","postcss-nested":"^6.0.1","postcss-preset-env":"^9.2.0","postcss-pxtorem":"^6.0.0","style-loader":"^3.3.3","ts-loader":"^9.5.0","webpack":"^5.89.0","webpack-cli":"^5.1.4","webpack-dev-server":"^4.15.1"}}')},function(e,t,i){var a=this&&this.__createBinding||(Object.create?function(e,t,i,a){void 0===a&&(a=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,a,o)}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&a(t,e,i);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;const l=i(1),n=r(i(3));let s=l.name.split("-")[0].toLocaleUpperCase();t.logger={log(e){n.logger&&console.log(`[${s}] - ${String(e)}`)},error(e){n.logger&&console.error(`[${s}] - ${String(e)}`)},warn(e){n.logger&&console.warn(`[${s}] - ${String(e)}`)},dlog(e,i){n.logger&&(n.debug?t.logger.debug.log(i):t.logger.log(e))},debug:{loaded(e){n.logger&&n.debug&&console.log(`[${s}] - DEBUG: /src/${String(e)} loaded!`)},log(e){n.logger&&n.debug&&console.log(`[${s}] - DEBUG: ${String(e)}`)},warn(e){n.logger&&n.debug&&console.warn(`[${s}] - DEBUG: ${String(e)}`)}}},t.logger.debug.loaded("logger.ts")},e=>{e.exports=JSON.parse('{"debug":false,"logger":true}')},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.embed=void 0;const a=i(1),o=i(2),r=i(5),l=i(6),n=i(7),s=i(9),d=i(10);t.embed={create(e,t){var i;let n=r.ytelem.watch.video_container();if(!n)return;const s={autoplay:1,enablejsapi:1,fs:1,modestbranding:1,origin:"0.0.0.0",rel:0,showinfo:0,start:l.urlparams.current().has("t")?Number(null===(i=l.urlparams.current().get("t"))||void 0===i?void 0:i.replace(/[^0-9]/g,"")):0,v:3},d=Object.keys(s).map((e=>`${e}=${encodeURIComponent(s[e])}`)).join("&");let c=document.createElement("iframe");c.src=`https://www.youtube.com/embed/${e}/?${d}`,c.id=a.name.split("-")[0],c.loading="eager",c.referrerPolicy="same-origin",c.setAttribute("data-yteab",btoa(e)),c.style.display="none",c.setAttribute("sandbox","allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-top-navigation"),n.appendChild(c),r.yteabelem.watch.iframe.id(e)?(o.logger.debug.log("Iframe rendering finished"),t&&t()):o.logger.error("Unable to create iframe")},prepare(e,i){var a;o.logger.debug.log("Preparing video iframe..."),null===(a=r.ytelem.watch.player())||void 0===a||a.classList.add("yteab-playing"),s.mute.enable();const l=e.detail.endpoint.watchEndpoint.videoId;t.embed.create(l,(()=>{i&&i()}))},preparation:{preserve(e){var i=!1;"yt-navigate-finish"==e.type&&(i=!0);const a=e,l=e,s=i?a.detail.response.endpoint.watchEndpoint.videoId:l.videoDetails.videoId,c=r.yteabelem.watch.iframe.id(s);c&&(o.logger.dlog("Keeping prepared render","Keeping prepared iframe"),t.embed.keep(s),n.modify.safe(e),t.embed.focus(s),c.style.display="block",d.sync.safestart(a))},cancel(e){var i;o.logger.dlog("Canceling prepared render","Canceling prepared iframe"),t.embed.remove(),null===(i=r.ytelem.watch.player())||void 0===i||i.classList.remove("yteab-playing"),s.mute.disable(),d.sync.stop()}},keep(e){var t;r.yteabelem.watch.iframe.id(e)?null===(t=r.yteabelem.watch.iframes())||void 0===t||t.forEach((t=>{t.getAttribute("data-yteab")!=btoa(e)&&t.remove()})):o.logger.error("Unable find iframe to keep")},focus(e){let t=e?r.yteabelem.watch.iframe.id(e):r.yteabelem.watch.iframe.any();if(t)try{t.focus(),o.logger.debug.log("Iframe element focused")}catch(e){o.logger.error("Unable to focus iframe: \n"+e)}},hide(e){let t=e?r.yteabelem.watch.iframe.id(e):r.yteabelem.watch.iframe.any();t&&(t.style.visibility="hidden")},show(e){let t=e?r.yteabelem.watch.iframe.id(e):r.yteabelem.watch.iframe.any();t&&(t.style.visibility="visible")},getinfo(e){var t;const i=e?r.yteabelem.watch.iframe.id(e):r.yteabelem.watch.iframe.any();if(!i)return;var a=null===(t=null==i?void 0:i.contentWindow)||void 0===t?void 0:t.document;if(!a)return;const o=a.querySelector("#player div.html5-video-container video");return o?{iframe:{clientHeight:i.clientHeight,clientWidth:i.clientWidth,src:i.src},video:{clientHeight:o.clientHeight,clientWidth:o.clientWidth,duration:o.duration,ended:o.ended,loop:o.loop,paused:o.paused,videoHeight:o.videoHeight,videoWidth:o.videoWidth,volume:o.volume}}:void 0},remove(){var e;if(r.yteabelem.watch.iframe.any())try{null===(e=r.yteabelem.watch.iframes())||void 0===e||e.forEach((e=>{e.remove()})),d.sync.stop(),s.mute.disable()}catch(e){o.logger.error(`Unable to remove iframes:\n${e}`)}finally{o.logger.dlog("Restored youtube defaults","All existing iframes removed")}}},o.logger.debug.loaded("inject/watch/embed.ts")},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ytif=t.ytelem=t.yteabelem=t.regex=void 0;const a=i(2);t.regex={ytid:/([a-zA-Z0-9\_-]){11,11}/,yturl:/(?:https?:\/\/)?(?:youtu\.be\/|(?:www\.|m\.)?youtube\.com\/(?:watch|v)?(?:\?.*v=|\/))([a-zA-Z0-9\_-]){11,11}/};const o={watch:{iframe:{any:()=>document.querySelector("ytd-player iframe#yteab"),id:e=>document.querySelector(`ytd-player iframe#yteab[data-yteab="${btoa(e)}"]`)},iframes:()=>document.querySelectorAll("ytd-player iframe#yteab")}};t.yteabelem=o;const r={watch:{ytd_watch_flexy:()=>document.querySelector("ytd-watch-flexy"),columns:()=>document.querySelector("ytd-watch-flexy #columns"),columns_primary:()=>document.querySelector("ytd-watch-flexy #columns #primary"),columns_secondary:()=>document.querySelector("ytd-watch-flexy #columns #secondary"),ytd_player:()=>document.querySelector("ytd-player"),player_container:()=>document.querySelector("ytd-player div#container"),player:()=>document.querySelector("ytd-player div#movie_player"),video_container:()=>document.querySelector("ytd-player div.html5-video-container"),video:()=>document.querySelector("ytd-player div.html5-video-container video"),tooltip:()=>document.querySelector("ytd-player div.ytp-tooltip"),ytd_watch_next:{first:()=>document.querySelector("ytd-watch-next-secondary-results-renderer #contents ytd-compact-video-renderer:first-child a"),nth:e=>document.querySelector(`ytd-watch-next-secondary-results-renderer #contents ytd-compact-video-renderer:nth-child(${e}) a`)},controls:{prev:()=>document.querySelector("ytd-player .ytp-chrome-controls .ytp-prev-button"),pause:()=>document.querySelector("ytd-player .ytp-chrome-controls .ytp-play-button"),next:()=>document.querySelector("ytd-player .ytp-chrome-controls .ytp-next-button")},settings:{button:()=>document.querySelector("ytd-player .ytp-chrome-controls .ytp-settings-button"),menu:()=>document.querySelector("ytd-player .ytp-settings-menu > .ytp-panel > div"),quality:()=>document.querySelector("ytd-player .ytp-settings-menu > .ytp-panel > div > div:last-child"),qualities:()=>document.querySelectorAll(".ytp-quality-menu .ytp-menuitem > .ytp-menuitem-label > div > span")}}};t.ytelem=r;const l={watch:{adplaying:()=>{var e,t;return(null===(e=r.watch.player())||void 0===e?void 0:e.classList.contains("ad-showing"))||(null===(t=r.watch.player())||void 0===t?void 0:t.classList.contains("ad-interrupting"))},isplaylist:()=>{var e;return null===(e=document.querySelector("ytd-watch-flexy"))||void 0===e?void 0:e.hasAttribute("playlist")}}};t.ytif=l,a.logger.debug.loaded("main.ts")},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.urlparams=void 0;const a=i(2);t.urlparams={current:()=>new URLSearchParams(window.location.search),custom:e=>new URLSearchParams(e)},a.logger.debug.loaded("inject/urlparams.ts")},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.modify=void 0;const a=i(2),o=i(5),r=i(4),l=i(8);var n=0;t.modify={safe(e){var i,r,l=!1;"yt-navigate-finish"==e.type&&(l=!0);const n=e,s=e;var d;if(l){const e=n.detail.response;d=e&&"watch"==e.page&&"OK"==e.playerResponse.playabilityStatus.status&&e.playerResponse.playabilityStatus.playableInEmbed&&0==e.playerResponse.videoDetails.isOwnerViewing&&0==e.playerResponse.videoDetails.isPrivate&&0==e.playerResponse.videoDetails.isLiveContent}else{const e=(null===(i=document.querySelector("ytd-masthead"))||void 0===i?void 0:i.hasAttribute("is-watch-page"))&&"main"==(null===(r=document.querySelector("ytd-watch-flexy"))||void 0===r?void 0:r.getAttribute("role"))||"/watch"==window.location.pathname;d=s&&e&&"OK"==s.playabilityStatus.status&&s.playabilityStatus.playableInEmbed&&0==s.videoDetails.isOwnerViewing&&0==s.videoDetails.isPrivate&&0==s.videoDetails.isLiveContent}if(o.yteabelem.watch.iframe.any()&&d){const e=l?n.detail.response.endpoint.watchEndpoint.videoId:s.videoDetails.videoId;try{t.modify.now(e,(()=>{a.logger.dlog("Adjusted player content","Frame content successfully manipulated")}))}catch(e){a.logger.error("Unable to manipulate frame content: \n"+e)}}},now(e,i){var s;try{clearTimeout(n)}catch(e){}let d=e?o.yteabelem.watch.iframe.id(e):o.yteabelem.watch.iframe.any();var c=null===(s=null==d?void 0:d.contentWindow)||void 0===s?void 0:s.document;if(!c)return;let u=c.querySelector("#movie_player");u&&(u.classList.remove("ytp-embed"),u.classList.remove("ytp-embed-playlist"),u.classList.add("yteab-embed"));let y=c.querySelector(".ytp-next-button");y&&(y.style.display="block",y.style.opacity=".9",y.style.cursor="pointer",y.onclick=()=>{var e,t;o.ytif.watch.isplaylist()?null===(e=o.ytelem.watch.controls.next())||void 0===e||e.click():null===(t=o.ytelem.watch.ytd_watch_next.first())||void 0===t||t.click()});let p=c.querySelector(".ytp-prev-button");p&&o.ytif.watch.isplaylist()&&(p.style.display="block",p.style.opacity=".9",p.style.cursor="pointer",p.onclick=()=>{var e;null===(e=o.ytelem.watch.controls.prev())||void 0===e||e.click()});let m=[".ytp-ce-element",".ytp-chrome-top",".ytp-gradient-top",".ytp-more-videos-view"],g=[".ytp-chrome-top",".ytp-contextmenu .ytp-panel-menu > .ytp-menuitem:first-child",".ytp-contextmenu .ytp-collapse",".ytp-gradient-top",".ytp-impression-link",".ytp-more-videos-view",".ytp-pause-overlay",".ytp-pause-overlay-container",".ytp-youtube-button"];for(let e of m){let t=c.querySelector(e);t&&t.remove()}for(let e of g){let t=c.querySelector(e);t&&(t.style.display="none")}let v=c.createElement("style");v.innerHTML=`${g.toString()} {display: none!important}`,v.className="yteab-style-hide",c.body.appendChild(v),u&&u.classList.contains("yteab-embed")?(l.ratiofix.fixnow(e),i&&i()):(r.embed.hide(),n=setTimeout((()=>{t.modify.now(e,(()=>{a.logger.dlog("Adjusted player content","Frame content manipulated after a retry"),r.embed.show()}))}),500))}},a.logger.debug.loaded("inject/watch/modify.ts")},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ratiofix=void 0;const a=i(2),o=i(5),r=i(4),l="--ytd-watch-flexy-height-ratio",n="--ytd-watch-flexy-width-ratio";var s,d,c;t.ratiofix={getratio:{css(){const e=o.ytelem.watch.ytd_watch_flexy();if(e)return{height:Number(e.getComputedStyleValue(l)),width:Number(e.getComputedStyleValue(n))}},video(e){var t,i;const a=null===(t=r.embed.getinfo(e))||void 0===t?void 0:t.video.videoHeight,o=null===(i=r.embed.getinfo(e))||void 0===i?void 0:i.video.videoWidth;if(a&&o)return{height:Number(a/o),width:Number(o/a)}}},align(e,i){var a,s,d,c;const u=null===(a=r.embed.getinfo(e))||void 0===a?void 0:a.video.videoHeight,y=null===(s=r.embed.getinfo(e))||void 0===s?void 0:s.video.videoWidth;if(!u||!y)return;const p=null===(d=t.ratiofix.getratio.video(e))||void 0===d?void 0:d.height,m=null===(c=t.ratiofix.getratio.video(e))||void 0===c?void 0:c.width;if(!p||!m)return;const g=o.ytelem.watch.ytd_watch_flexy();g&&(u>y?(g.style.setProperty(n,String(m)),g.style.setProperty(l,"1")):u<y?(g.style.setProperty(l,String(p)),g.style.setProperty(n,"1")):(g.style.setProperty(n,String(m)),g.style.setProperty(l,String(p))),i&&i())},fixnow(e,i=500,a=2e3,o=250){clearTimeout(s),clearTimeout(d),clearInterval(c),s=setTimeout((()=>{clearTimeout(d),clearInterval(c),c=setInterval((()=>{try{e?t.ratiofix.align(e):t.ratiofix.align()}catch(e){}}),o),d=setTimeout((()=>{clearInterval(c)}),a)}),i)}},a.logger.debug.loaded("inject/watch/ratiofix.ts")},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mute=void 0;const a=i(2),o=i(5);var r;t.mute={enable(){var e,t;(null===(e=o.ytelem.watch.player())||void 0===e?void 0:e.classList.contains("yteab-mute"))||(null===(t=o.ytelem.watch.player())||void 0===t||t.classList.add("yteab-mute"),r=setInterval((()=>{let e=o.ytelem.watch.video();e&&!e.muted&&(e.muted=!0)}),1),a.logger.debug.log("Main video muted"))},disable(){var e,t;if(!(null===(e=o.ytelem.watch.player())||void 0===e?void 0:e.classList.contains("yteab-mute")))return;let i=o.ytelem.watch.video();clearInterval(r),i&&i.muted&&(i.muted=!1),a.logger.debug.log("Main video unmuted"),null===(t=o.ytelem.watch.player())||void 0===t||t.classList.remove("yteab-mute")}},a.logger.debug.loaded("inject/watch/mute.ts")},function(e,t,i){var a=this&&this.__createBinding||(Object.create?function(e,t,i,a){void 0===a&&(a=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,a,o)}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&a(t,e,i);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.sync=void 0;const l=r(i(3)),n=i(2),s=i(5),d=i(11);var c,u;t.sync={safestart(e,i=1,a=2){var o,r,l=!1;"yt-navigate-finish"==e.type&&(l=!0);const u=e,y=e;var p;if(l){const e=u.detail.response;p=e&&"watch"==e.page&&"OK"==e.playerResponse.playabilityStatus.status&&e.playerResponse.playabilityStatus.playableInEmbed&&0==e.playerResponse.videoDetails.isOwnerViewing&&0==e.playerResponse.videoDetails.isPrivate&&0==e.playerResponse.videoDetails.isLiveContent}else{const e=(null===(o=document.querySelector("ytd-masthead"))||void 0===o?void 0:o.hasAttribute("is-watch-page"))&&"main"==(null===(r=document.querySelector("ytd-watch-flexy"))||void 0===r?void 0:r.getAttribute("role"))||"/watch"==window.location.pathname;p=y&&e&&"OK"==y.playabilityStatus.status&&y.playabilityStatus.playableInEmbed&&0==y.videoDetails.isOwnerViewing&&0==y.videoDetails.isPrivate&&0==y.videoDetails.isLiveContent}if(s.yteabelem.watch.iframe.any()&&p){const e=l?u.detail.response.endpoint.watchEndpoint.videoId:y.videoDetails.videoId;clearTimeout(c),c=setTimeout((()=>{try{d.quality.main.setonce("360p"),t.sync.startnow(a,e)}catch(e){n.logger.error("Unable to start synchronization: \n"+e)}finally{n.logger.log("Synchronization started successfully")}}),1e3*i)}},startnow(e,i){var a;clearTimeout(c),clearInterval(u),null===(a=s.ytelem.watch.player())||void 0===a||a.classList.add("yteab-sync");let o=!1;u=setInterval((()=>{var e;let a=s.ytelem.watch.video(),r=i?s.yteabelem.watch.iframe.id(i):s.yteabelem.watch.iframe.any();var d=null===(e=null==r?void 0:r.contentWindow)||void 0===e?void 0:e.document;if(!d)return;let c=d.querySelector("video");if(s.ytif.watch.adplaying())a&&(a.playbackRate=2);else if(a&&r&&d&&c)if(1!=a.playbackRate&&(a.playbackRate=1),a.pause(),a.ended&&a.play(),a.currentTime!=c.currentTime){if(o=!1,l.debug){const e=Number(a.currentTime.toFixed(3)),t=Number(c.currentTime.toFixed(3)),i=Number(Math.abs(t-e).toFixed(3)),o=Number((i/a.duration*100).toFixed(3));n.logger.debug.log(`Synchronization - main: ${e.toFixed(2)}, embed: ${t.toFixed(2)}, delta: ${i.toFixed(2)}, loss: ${o}%`)}a.currentTime=c.currentTime}else 0==o&&n.logger.dlog("Video paused, halting...",`Synchronization - VIDEO PAUSED at ${c.currentTime.toFixed(2)}`),o=!0;else t.sync.stop()}),1e3*e)},stop(){var e,t;clearTimeout(c),clearInterval(u),(null===(e=s.ytelem.watch.player())||void 0===e?void 0:e.classList.contains("yteab-sync"))&&n.logger.log("Synchronization stopped"),null===(t=s.ytelem.watch.player())||void 0===t||t.classList.remove("yteab-sync")}},n.logger.debug.loaded("inject/watch/sync.ts")},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.quality=void 0;const a=i(2),o=i(5);t.quality={translate(e){switch(e){case"144p":return"tiny";case"240p":return"small";case"360p":return"medium";case"480p":return"large";case"720p":return"hd720";case"1080p":return"hd1080";case"1440p":return"hd1440";case"2160p":return"hd2160";case"2880p":return"hd2880";case"4320p":return"hd4320";default:return a.logger.error("Unable to recognize quality label"),null}},main:{init(){let e=o.ytelem.watch.settings.button();e&&(e.click(),e.click())},get(){this.init();let e=o.ytelem.watch.settings.quality(),i=null==e?void 0:e.querySelector("span.ytp-menu-label-secondary");if(e&&i){let e=i.innerText.slice(1,-1).split("p")[0]+"p";return t.quality.translate(e)}return null},getrawcookie(e=!1){let t=window.localStorage.getItem("yt-player-quality");if(!t)return null;if(e){let e=JSON.parse(t),i=JSON.parse(e.data);return e.data=i,e}return t},getcookie(){let e=this.getrawcookie(!0),i=null==e?void 0:e.data;if(e&&i){let e=i.quality+"p";return t.quality.translate(e)}return null},set(e,t=!1,i){var r,l,n;this.init();let s=o.ytelem.watch.settings.quality(),d=null==s?void 0:s.querySelector("span.ytp-menu-label-secondary");if(s&&d){if(e==d.innerText.slice(1,-1).split("p")[0]+"p")return;s.click();let y=o.ytelem.watch.settings.qualities();if(y){for(var c,u=0;u<y.length;u++)if(null===(r=y[u].textContent)||void 0===r?void 0:r.includes(e)){c=y[u];break}if(c){let o=null===(n=null===(l=c.parentElement)||void 0===l?void 0:l.parentElement)||void 0===n?void 0:n.parentElement;o?(o.click(),t||a.logger.log("Main video quality changed to: "+e),i&&i()):a.logger.error("Unable to change main video quality to "+e),s.click()}}}},setcookie(e){let t=this.getrawcookie(!0),i=null==t?void 0:t.data;t&&i&&(i.quality=Number(e.slice(0,-1)),t.data=JSON.stringify(i),window.localStorage.setItem("yt-player-quality",JSON.stringify(t)),a.logger.log("Video quality cookie changed to: "+e))},setrawcookie(e){e&&window.localStorage.setItem("yt-player-quality",JSON.stringify(e))},setonce(e){let t=this.getrawcookie();this.set(e,!0,(()=>{this.setrawcookie(JSON.parse(t)),a.logger.dlog("Adjusted video quality",`Main video quality changed once to: ${e}`)}))}},embed:{init(e){var t;let i=e?o.yteabelem.watch.iframe.id(e):o.yteabelem.watch.iframe.any();var a=null===(t=null==i?void 0:i.contentWindow)||void 0===t?void 0:t.document;if(!a)return;let r=a.querySelector(".ytp-chrome-controls .ytp-settings-button");r&&(r.click(),r.click())},get(e){var i;this.init();let a=e?o.yteabelem.watch.iframe.id(e):o.yteabelem.watch.iframe.any();var r=null===(i=null==a?void 0:a.contentWindow)||void 0===i?void 0:i.document;if(!r)return null;let l=r.querySelector(".ytp-settings-menu > .ytp-panel > div > div:last-child"),n=null==l?void 0:l.querySelector("span.ytp-menu-label-secondary");if(l&&n){let e=n.innerText.slice(1,-1).split("p")[0]+"p";return t.quality.translate(e)}return null}}},a.logger.debug.loaded("inject/watch/quality.ts")},function(e,t,i){var a=this&&this.__createBinding||(Object.create?function(e,t,i,a){void 0===a&&(a=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,a,o)}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&a(t,e,i);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.events=void 0;const l=r(i(3)),n=i(2),s=i(4),d=i(5),c=i(9);t.events={listen(e){try{document.addEventListener(e,(t=>this.run(e,t)))}catch(t){n.logger.error(`Unable to listen ${e}:\n${t}`)}finally{n.logger.debug.log(`Listening for event: ${e}`)}},run(e,t){switch(e){case"yt-navigate-finish":if(t){const e=t;if(e.returnValue)if("watch"==e.detail.pageType){const t=e.detail.response;if("watch"==t.page&&"OK"==t.playerResponse.playabilityStatus.status&&t.playerResponse.playabilityStatus.playableInEmbed&&0==t.playerResponse.videoDetails.isOwnerViewing&&0==t.playerResponse.videoDetails.isPrivate&&0==t.playerResponse.videoDetails.isLiveContent){n.logger.log("Video overwrite possible!");const i=t.endpoint.watchEndpoint.videoId;d.yteabelem.watch.iframe.id(i)?s.embed.preparation.preserve(e):(n.logger.log(`Processing video '${e.detail.endpoint.watchEndpoint.videoId}'`),s.embed.create(i,(()=>{var t;null===(t=d.ytelem.watch.player())||void 0===t||t.classList.add("yteab-playing"),s.embed.preparation.preserve(e)})))}else n.logger.log("Video overwrite NOT possible!"),l.debug&&("OK"!=t.playerResponse.playabilityStatus.status&&n.logger.debug.warn("Overwrite failed - Playability status: "+t.playerResponse.playabilityStatus.status),t.playerResponse.playabilityStatus.playableInEmbed||n.logger.debug.warn("Overwrite failed - Video is not playable in embed"),t.playerResponse.videoDetails.isOwnerViewing&&n.logger.debug.warn("Overwrite failed - Video is viewed by owner"),t.playerResponse.videoDetails.isPrivate&&n.logger.debug.warn("Overwrite failed - Video is private"),t.playerResponse.videoDetails.isLiveContent&&n.logger.debug.warn("Overwrite failed - Video is live content")),s.embed.preparation.cancel(e)}else s.embed.remove();else n.logger.error("Cannot read yt-navigate-finish");break}case"yt-navigate-start":if(t){const e=t;e.returnValue?"watch"==e.detail.pageType&&(n.logger.log(`Processing video '${e.detail.endpoint.watchEndpoint.videoId}'`),c.mute.enable(),s.embed.prepare(e)):n.logger.error("Cannot read yt-navigate-start");break}}}},n.logger.debug.loaded("inject/events.ts")},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;const a=i(2),o=i(5),r=i(4),l=i(9);t.init=()=>{var e,t,i,n;const s=window.ytInitialPlayerResponse;let d=(null===(e=document.querySelector("ytd-masthead"))||void 0===e?void 0:e.hasAttribute("is-watch-page"))&&"main"==(null===(t=document.querySelector("ytd-watch-flexy"))||void 0===t?void 0:t.getAttribute("role"))||"/watch"==window.location.pathname,c=(null===(i=document.querySelector("ytd-player #movie_player"))||void 0===i?void 0:i.classList.contains("yteab-playing"))||(null===(n=document.querySelector("ytd-player #movie_player"))||void 0===n?void 0:n.className.includes("yteab"))||document.querySelector("iframe#yteab");if(d&&!c&&s){const e=s.videoDetails.videoId;a.logger.log(`Processing video '${e}'`),"OK"==s.playabilityStatus.status&&s.playabilityStatus.playableInEmbed&&0==s.videoDetails.isOwnerViewing&&0==s.videoDetails.isPrivate&&0==s.videoDetails.isLiveContent?(a.logger.log("Video overwrite possible!"),l.mute.enable(),r.embed.create(e,(()=>{var e;null===(e=o.ytelem.watch.player())||void 0===e||e.classList.add("yteab-playing"),r.embed.preparation.preserve(s)}))):a.logger.log("Video overwrite NOT possible!")}},a.logger.debug.loaded("inject/watch/init.ts")}],t={};!function i(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,i),r.exports}(0)})();